<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-Sync Gaming Hub</title>
    <style>
        :root { --primary: #8b5cf6; --bg: #0f172a; --panel: #1e293b; --text: #f8fafc; }
        body { background: var(--bg); color: var(--text); font-family: system-ui; margin: 0; padding: 20px; }
        
        header { background: var(--panel); padding: 15px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 3px solid var(--primary); }
        
        .game-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; }
        .card { background: var(--panel); padding: 15px; border-radius: 12px; cursor: pointer; border: 1px solid #334155; transition: 0.3s; text-align: center; }
        .card:hover { transform: translateY(-5px); border-color: var(--primary); box-shadow: 0 0 15px rgba(139, 92, 246, 0.3); }
        .card .icon { font-size: 40px; margin-bottom: 10px; display: block; }
        
        #game-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: none; flex-direction: column; }
        .nav-bar { background: #111; padding: 10px; display: flex; justify-content: space-between; }
        iframe { border: none; flex-grow: 1; }
        
        .loader { color: var(--primary); font-weight: bold; padding: 20px; text-align: center; width: 100%; }
    </style>
</head>
<body>

<header>
    <div>
        <h2 style="margin:0">AUTO-HUB</h2>
        <small id="sync-text">Scanning Repository...</small>
    </div>
    <div style="background:#000; padding:5px 15px; border-radius:20px; font-size:12px;">
        GAMES FOUND: <span id="game-count">0</span>
    </div>
</header>

<div class="game-grid" id="grid">
    <div class="loader">üîç Analyzing GitHub contents...</div>
</div>

<div id="game-overlay">
    <div class="nav-bar">
        <button onclick="closeGame()" style="background:#ef4444; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer;">EXIT</button>
        <span id="active-title">Loading...</span>
        <button onclick="document.documentElement.requestFullscreen()" style="background:var(--primary); color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer;">FULLSCREEN</button>
    </div>
    <iframe id="player"></iframe>
</div>

<script>
    // 1. CONFIGURATION
    const USER = "619amandagaiser-del";
    const REPO = "My-Game-hub";
    const API_URL = `https://api.github.com/repos/${USER}/${REPO}/contents/`;

    // 2. THE SCANNER ENGINE
    async function scanRepo() {
        try {
            const response = await fetch(API_URL);
            const files = await response.json();
            
            // Filter: only get .html files (ignoring index.html)
            const games = files.filter(file => 
                file.name.endsWith('.html') && 
                file.name.toLowerCase() !== 'index.html'
            );

            renderGames(games);
        } catch (err) {
            document.getElementById('grid').innerHTML = "<p>Error connecting to GitHub. Make sure your repo is Public.</p>";
        }
    }

    // 3. UI GENERATOR
    function renderGames(games) {
        const grid = document.getElementById('grid');
        grid.innerHTML = "";
        document.getElementById('game-count').innerText = games.length;
        document.getElementById('sync-text').innerText = "‚óè Repository Synced";

        games.forEach(game => {
            // Clean up name: "My_Game.html" -> "My Game"
            const cleanName = game.name.replace('.html', '').replace(/_/g, ' ').replace(/-/g, ' ');
            const rawUrl = `https://${USER}.github.io/${REPO}/${game.name}`;

            const card = document.createElement('div');
            card.className = 'card';
            card.onclick = () => launch(rawUrl, cleanName);
            card.innerHTML = `
                <span class="icon">üéÆ</span>
                <strong>${cleanName}</strong>
                <div style="font-size:10px; opacity:0.5; margin-top:5px;">HTML5 GAME</div>
            `;
            grid.appendChild(card);
        });
    }

    // 4. LAUNCHER
    function launch(url, title) {
        document.getElementById('player').src = url;
        document.getElementById('game-overlay').style.display = 'flex';
        document.getElementById('active-title').innerText = title;
    }

    function closeGame() {
        document.getElementById('game-overlay').style.display = 'none';
        document.getElementById('player').src = "";
    }

    // Start
    scanRepo();
</script>
</body>
</html>
